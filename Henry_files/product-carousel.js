var productCarousel=function(){var n,t;return init=function(){$("#product-slides-loader").show(),getCarouselJson().then(function(t){n=t,findOverrideCarousel().then(function(n){updateCarouselSlides(n).then(function(){activateCarousel()})}).fail(function(){activateCarousel()})}).fail(function(){activateCarousel()})},activateCarousel=function(){$(".rslides-product").responsiveSlides({auto:!0,pager:!0,nav:!0,speed:500,width:"100%"}),$("#product-slides-loader").fadeOut()},updateCarouselSlides=function(n){var t=new jQuery.Deferred;return n==undefined?t.reject():($("#product-slides .rslides-product").empty(),$("#product-slides .js-paginate").empty(),$.each(n.slides,function(n,t){var i=getCrop(t,"980_x_336");$("#product-slides .rslides-product").append('<div class="carousel-image"><img src="'+i.url+'" alt="'+t.alttext+'" width="'+i.width+'" height="'+i.height+'" /><\/div>')}),$("#product-slides").attr("data-carousel-id",n.id),$("#product-slides").attr("data-start-date",moment(n.startdate).format()),$("#product-slides").attr("data-end-date",moment(n.enddate).format()),t.resolve()),t},getCrop=function(n,t){var i;return $.each(n.crops,function(n,r){if(r.alias==t){i=r;return}}),i},findOverrideCarousel=function(){var t=new jQuery.Deferred,i;return $.each(n.overridecarousels,function(n,t){if(moment().isAfter(t.startdate)&&moment().isBefore(t.enddate)){i=t;return}}),i==undefined?t.reject():t.resolve(i),t},getCarouselJson=function(){var n=new jQuery.Deferred;return $.ajax({url:"/handlers/ProductCarouselHandler.ashx?action=ProductCarouselJson&contentId="+getContentId()+"&cacheBuster="+Math.floor(Math.random()*1e9+1),contentType:"application/json"}).done(function(t){n.resolve(t)}).fail(function(){n.reject()}),n.promise()},getContentId=function(){return $("#product-slides").attr("data-content-id")},{name:"productCarousel",init:init}}();jQuery(document).ready(function(){productCarousel.init()})